<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Cartoon Network ‚Äî Classic Hub</title>
<script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
<style>
  /* ---------- Retro style (Comic Sans feel + bold) ---------- */
  @font-face { font-family: 'RetroSans'; src: local('Comic Sans MS'), local('Arial'); }
  :root {
    --accent: #00b8ff;
    --cn-blue: #0027a8;
    --panel: #111;
    --white: #fff;
  }
  html,body { height:100%; margin:0; background:#000; color:var(--white); font-family:RetroSans, "Comic Sans MS", "Arial", sans-serif; }
  a { color:var(--cn-blue); text-decoration:underline; cursor:pointer; }
  img { display:block; max-width:100%; }

  /* ---------- Thin blue framed container ---------- */
  .frame {
    box-sizing: border-box;
    border: 4px solid var(--accent);
    max-width: 1100px;
    margin: 18px auto;
    padding: 0;
    background: linear-gradient(#000,#050505);
    box-shadow: 0 10px 0 rgba(0,0,0,0.7);
  }

  /* ---------- Top logo / nav ---------- */
  .topbar {
    text-align:center;
    padding:14px 0 8px;
    background: transparent;
  }
  .cn-logo {
    display:inline-block;
    width:360px;
    height:auto;
    background:#fff;
    border:6px solid #000;
    box-shadow: 8px 8px 0 var(--accent);
    font-weight:900;
    line-height:1;
  }
  nav.mainnav {
    background:#0b0b0b;
    padding:10px 0;
    text-align:center;
    font-weight:700;
    letter-spacing:1px;
  }
  nav.mainnav a { color:#fff; margin:0 20px; font-size:14px; text-decoration:none; }
  nav.mainnav a:hover { text-decoration:underline; }

  /* ---------- Layout ---------- */
  .container { padding:18px; }
  .hero { display:flex; gap:24px; align-items:flex-start; justify-content:space-between; }
  .col { width:48%; min-width:260px; }
  h2 { font-size:28px; margin:6px 0 12px; color:#fff; text-shadow:0 1px 0 #000; }
  ul.classic-links { padding:0; margin:0; list-style:none; }
  ul.classic-links li { margin:12px 0; }
  ul.classic-links li a { font-weight:800; color:var(--cn-blue); }

  /* ---------- Panels / buttons ---------- */
  .panel { background:linear-gradient(#111,#0d0d0d); border:3px solid #fff; padding:14px; margin-top:18px; box-shadow:0 8px 0 #000; }
  .btn {
    display:inline-block; background:var(--accent); border:3px solid #000; color:#000; font-weight:900; padding:8px 14px; margin:6px 6px; cursor:pointer; box-shadow:4px 4px 0 #000;
  }
  .btn:hover { transform:translateY(-2px); box-shadow:6px 6px 0 #000; }
  .back-btn { background:#fff200; border:3px solid #000; padding:8px 12px; font-weight:900; color:#000; cursor:pointer; box-shadow:4px 4px 0 #000; }

  .small { font-size:12px; color:#ccc; }

  /* ---------- Pages ---------- */
  .page { display:none; opacity:0; transition:opacity .45s ease; min-height:60vh; }
  .page.active { display:block; opacity:1; }

  /* ---------- Web player ---------- */
  video#webVideo { width:92%; max-width:820px; border:3px solid #fff; background:#000; display:block; margin:14px auto; }
  #playlist { margin-top:12px; list-style:none; padding:0; text-align:left; max-width:820px; margin-left:auto; margin-right:auto; }
  .playlist-item { background:#161616; border:1px solid #fff; padding:8px 10px; margin:6px 0; display:flex; justify-content:space-between; align-items:center; }

  /* ---------- Flash player ---------- */
  #ruffleContainer { margin:12px auto; width:90%; max-width:840px; height:60vh; border:12px solid var(--accent); background:#000; box-shadow:0 0 30px var(--accent); display:flex; align-items:center; justify-content:center; }

  /* ---------- Responsive ---------- */
  @media (max-width:880px) {
    .hero { flex-direction:column; }
    .col { width:100%; }
    .cn-logo { width:280px; }
    #ruffleContainer { height:48vh; }
  }
</style>
</head>
<body>

<!-- FRAMED SITE -->
<div class="frame">

  <!-- HUB PAGE -->
  <div id="hubPage" class="page active">
    <div class="topbar">
      <img src="Cartoon_Network_2010_logo.svg.png" alt="CN Logo" class="cn-logo" />
    </div>

    <nav class="mainnav">
      <a>Home</a><a>Shows</a><a>Games</a><a>Videos</a><a>Fun</a>
    </nav>

    <div class="container">
      <div class="hero">
        <div class="col">
          <h2>Featured Shows</h2>
          <ul class="classic-links">
            <li><a id="linkPowerpuff">The Powerpuff Girls</a></li>
            <li><a id="linkDexter">Dexter's Laboratory</a></li>
            <li><a id="linkJohnny">Johnny Bravo</a></li>
            <li><a id="linkEd">Ed, Edd n Eddy</a></li>
          </ul>

          <div class="panel">
            <strong>Watch / Play</strong>
            <div style="margin-top:10px">
              <button class="btn" id="openWeb">üé¨ Cartoon Network Web Player</button>
              <button class="btn" id="openFlash">üíæ Cartoon Network Flash Player (Ruffle)</button>
              <label style="margin-left:12px"><input type="checkbox" id="muteToggle" /> Mute sounds</label>
            </div>
            <p class="small" style="margin-top:8px">Tip: upload a video or SWF to try locally</p>
          </div>
        </div>

        <div class="col">
          <h2>Latest Videos</h2>
          <ul class="classic-links">
            <li><a>Powerpuff Girls Episode 1</a></li>
            <li><a>Dexter's Lab Episode 1</a></li>
            <li><a>Johnny Bravo Episode 1</a></li>
            <li><a>Ed, Edd n Eddy Episode 1</a></li>
          </ul>

          <div class="panel" style="text-align:center">
            <strong>Quick Demo</strong>
            <div style="margin-top:10px">
              <video id="hubSample" width="320" height="180" muted loop playsinline style="display:none">
                <source src="" type="video/mp4">
              </video>
              <div class="small" style="margin-top:8px">Mockup of the old front page</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- WEB PLAYER PAGE -->
  <div id="webPage" class="page">
    <div class="topbar"><img src="Cartoon_Network_2010_logo.svg.png" alt="CN Logo" class="cn-logo" /></div>
    <nav class="mainnav"><a>Home</a><a>Shows</a><a>Games</a><a>Videos</a><a>Fun</a></nav>

    <div class="container">
      <div class="panel player-box">
        <h2 style="margin-bottom:6px">Cartoon Network Web Player</h2>
        <div class="small" style="margin-bottom:8px">2002 style video player ‚Äî upload MP4 / WEBM or play from playlist</div>

        <video id="webVideo" controls></video>

        <div class="controls" style="margin-top:10px">
          <button class="btn" id="playVideo">‚ñ∂ Play</button>
          <button class="btn" id="pauseVideo">‚è∏ Pause</button>
          <button class="btn" id="restartVideo">üîÑ Restart</button>
          <button class="btn" id="stopVideo">‚èπ Stop</button>
          <button class="back-btn" id="backFromWeb">‚¨Ö Return to Hub</button>
        </div>

        <div style="margin-top:12px">
          <label class="btn" for="videoUpload">Upload Video</label>
          <input id="videoUpload" type="file" accept="video/*" style="display:none"/>
          <button class="btn" id="addFolder">üìÅ Add Folder</button>
        </div>

        <ul id="playlist"></ul>
      </div>
    </div>
  </div>

  <!-- FLASH PLAYER PAGE -->
  <div id="flashPage" class="page">
    <div class="topbar"><img src="Cartoon_Network_2010_logo.svg.png" alt="CN Logo" class="cn-logo" /></div>
    <nav class="mainnav"><a>Home</a><a>Shows</a><a>Games</a><a>Videos</a><a>Fun</a></nav>

    <div id="flashView" class="container">
      <div class="panel" style="padding:12px">
        <h2 style="margin:8px 0">Cartoon Network Flash Player</h2>
        <div id="ruffleContainer">
          <div style="color:#666;font-weight:700">No SWF loaded ‚Äî choose a .swf file below</div>
        </div>

        <div style="margin-top:12px">
          <input id="swfInput" type="file" accept=".swf" style="display:inline-block"/>
          <button class="btn" id="loadSwf">‚ñ∂ Load SWF</button>
          <button class="back-btn" id="backFromFlash">‚¨Ö Return to Hub</button>
        </div>

        <p class="small" style="margin-top:8px">Powered by Ruffle ‚Äî local SWF files only</p>
      </div>
    </div>
  </div>

</div>

<script>
/* ---------- Page navigation ---------- */
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo(0,0);
}

/* Hook up navigation buttons */
document.getElementById('openWeb').addEventListener('click', ()=> { playClick(); showPage('webPage'); });
document.getElementById('openFlash').addEventListener('click', ()=> { playClick(); showPage('flashPage'); });
document.getElementById('backFromWeb').addEventListener('click', ()=> { playClick(); showPage('hubPage'); stopAnyVideo(); });
document.getElementById('backFromFlash').addEventListener('click', ()=> { playClick(); showPage('hubPage'); stopAnyVideo(); });

['linkPowerpuff','linkDexter','linkJohnny','linkEd'].forEach(id=>{
  const el = document.getElementById(id);
  if(el) el.addEventListener('click', ()=> { playClick(); showPage('webPage'); });
});

/* ---------- Web player logic ---------- */
const webVideo = document.getElementById('webVideo');
const upload = document.getElementById('videoUpload');
const playlistEl = document.getElementById('playlist');
let folders = JSON.parse(localStorage.getItem('cn_folders') || '[]');
let standalone = JSON.parse(localStorage.getItem('cn_videos') || '[]');

function saveWebData(){ localStorage.setItem('cn_folders', JSON.stringify(folders)); localStorage.setItem('cn_videos', JSON.stringify(standalone)); }
function renderPlaylist(){
  playlistEl.innerHTML = '';
  standalone.forEach((v,i) => {
    const li = document.createElement('li'); li.className='playlist-item';
    const left = document.createElement('div'); left.style.flex='1';
    left.innerHTML = `<strong style="color:#9cc">${v.name}</strong><div class="small">${v.size}</div>`;
    li.appendChild(left);
    const actions = document.createElement('div');
    const playBtn = document.createElement('button'); playBtn.className='btn'; playBtn.textContent='Play';
    playBtn.addEventListener('click', ()=> { playClick(); webVideo.src=v.url; webVideo.play(); showPage('webPage');});
    const delBtn = document.createElement('button'); delBtn.className='btn'; delBtn.textContent='Del';
    delBtn.addEventListener('click', ()=> { standalone.splice(i,1); saveWebData(); renderPlaylist(); playClick(); });
    actions.appendChild(playBtn); actions.appendChild(delBtn); li.appendChild(actions);
    playlistEl.appendChild(li);
  });
  folders.forEach((f,idx)=> {
    const li = document.createElement('li'); li.className='playlist-item';
    li.innerHTML = `<div><strong>${f.name}</strong><div class="small">Folder</div></div>`;
    const del = document.createElement('button'); del.className='btn'; del.textContent='Del';
    del.addEventListener('click', ()=> { folders.splice(idx,1); saveWebData(); renderPlaylist(); playClick(); });
    li.appendChild(del); playlistEl.appendChild(li);
  });
}
renderPlaylist();

upload.addEventListener('change', (ev)=> {
  const file = ev.target.files[0]; if(!file) return;
  const url = URL.createObjectURL(file);
  standalone.push({ name:file.name, url, size:`${Math.round(file.size/1024)} KB` });
  saveWebData(); renderPlaylist(); webVideo.src=url; webVideo.play();
  playClick();
});

document.getElementById('playVideo').addEventListener('click', ()=> { playClick(); webVideo.play(); });
document.getElementById('pauseVideo').addEventListener('click', ()=> { playClick(); webVideo.pause(); });
document.getElementById('restartVideo').addEventListener('click', ()=> { playClick(); webVideo.currentTime=0; webVideo.play(); });
document.getElementById('stopVideo').addEventListener('click', ()=> { playClick(); webVideo.pause(); webVideo.currentTime=0; });

document.getElementById('addFolder').addEventListener('click', ()=> {
  const name = prompt('New folder name'); if(!name) return;
  folders.push({ name, videos:[] }); saveWebData(); renderPlaylist(); playClick();
});

/* ---------- Ruffle (Flash) ---------- */
let rufflePlayer = null;
function initRuffle(){
  try {
    const ruffle = window.RufflePlayer?.newest();
    if(!ruffle) return;
    rufflePlayer = ruffle.createPlayer();
    const container = document.getElementById('ruffleContainer');
    container.innerHTML = '';
    container.appendChild(rufflePlayer);
  } catch(e){ console.warn('Ruffle init failed', e); }
}
document.addEventListener('DOMContentLoaded', initRuffle);

document.getElementById('loadSwf').addEventListener('click', ()=> {
  const input = document.getElementById('swfInput');
  const file = input.files[0]; if(!file) return alert('Select a .swf file first');
  const reader = new FileReader();
  reader.onload = (e)=> {
    try {
      const arr = new Uint8Array(e.target.result);
      rufflePlayer.load({ data: arr });
      playClick();
    } catch(err) { alert('Failed to load SWF'); }
  };
  reader.readAsArrayBuffer(file);
});

/* stop video when leaving */
function stopAnyVideo(){ try { webVideo.pause(); } catch(e){} }

/* ---------------- Retro sounds (WebAudio synthesized) ---------------- */
let audioCtx = null;
let masterGain = null;
let muted = false;

function ensureAudio(){
  if(audioCtx) return;
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  masterGain = audioCtx.createGain();
  masterGain.gain.value = 0.9;
  masterGain.connect(audioCtx.destination);
}

function playBeep(freq, time=0.05, type='sine', when=0){
  if(muted) return;
  ensureAudio();
  const osc = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  osc.type = type;
  osc.frequency.setValueAtTime(freq, audioCtx.currentTime + when);
  g.gain.setValueAtTime(0.0001, audioCtx.currentTime + when);
  g.gain.exponentialRampToValueAtTime(0.15, audioCtx.currentTime + when + 0.005);
  g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + when + time);
  osc.connect(g); g.connect(masterGain);
  osc.start(audioCtx.currentTime + when);
  osc.stop(audioCtx.currentTime + when + time + 0.02);
}

function playClick(){ if(muted) return; playBeep(880,0.06,'square'); }
function playHover(){ if(muted) return; playBeep(1200,0.04,'sine'); }

/* CN jingle: simple rising notes */
function playJingle(){
  if(muted) return;
  ensureAudio();
  const notes = [440,660,880,1320];
  notes.forEach((n,i)=> playBeep(n,0.16,'triangle', i*0.09));
}

/* attach hover & click to interactive elements */
function wireSounds(){
  const clickEls = document.querySelectorAll('button, .btn, .back-btn, label, nav.mainnav a, ul.classic-links a');
  clickEls.forEach(el=>{
    el.addEventListener('click', ()=> playClick());
    el.addEventListener('mouseenter', ()=> playHover());
  });
}
wireSounds();

/* mute toggle */
const muteToggle = document.getElementById('muteToggle');
muteToggle.addEventListener('change', ()=> {
  muted = muteToggle.checked;
  if(muted && masterGain) masterGain.gain.value = 0;
  else if(masterGain) masterGain.gain.value = 0.9;
});

/* try to play jingle on load (may require user gesture) */
window.addEventListener('load', ()=> { try { playJingle(); } catch(e){} });

/* keyboard shortcut to return home */
document.addEventListener('keydown', (e)=> { if(e.key==='h' || e.key==='H') { playClick(); showPage('hubPage'); } });

/* show hub initially */
showPage('hubPage');
</script>
</body>
</html>
